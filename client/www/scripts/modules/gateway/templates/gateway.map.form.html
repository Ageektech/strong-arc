<div data-id="GatewayMapFormContainer">
  <form class="ui-form">
    <div data-id="GatewayMapFormTopRow">
      <div>
        <label>Mapping Name</label>
        <input class="gateway-map-main-input" ng-model="map.name" type="text" placeholder="name" />
      </div>
      <div>
        <label>Verb</label>
        <select  class="form-control" ng-model="map.verb">
          <option>ALL</option>
          <option>GET</option>
          <option>PUT</option>
          <option>POST</option>
          <option>DELETE</option>
          <option>HEAD</option>
        </select>
      </div>
      <div>
        <label>Url Pattern</label>
        <input ng-model="map.endpoint"
               type="text"
               class="gateway-map-main-input"
               placeholder="endpoint" />
      </div>
    </div>
    <div class="form-field gateway-map-pipeline-input-container">
      <label>Pipeline</label>
      <div dropdown class="dropdown-container">
        <button  id="simple-dropdown" dropdown-toggle>
          {{map.pipelineId}}
        </button>
        <ul class="dropdown-menu">
          <li ng-repeat="pipe in context.currentPipelines" ng-click="setMapPipelineId(map, pipe.id)">{{pipe.name}}</li>
        </ul>
      </div>
    </div>
    <table class="ui-table" ng-show="map.pipelineId">
      <thead>
      <tr>
        <th>
          type
        </th>
        <th>
          name
        </th>
        <th>
          details
        </th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="policy in map.pipeline.policies">
        <td><ui-icon name="policy-{{policy.type}}"></ui-icon></td>
        <td>{{policy.name}}</td>
        <td>
          <div ng-show="policy.type == 'ratelimiting'">
            <ul>
              <li>limit: {{policy.limit}}</li>
              <li>interval (ms): {{policy.interval}}</li>
            </ul>
          </div>
          <div ng-show="policy.type == 'reverseproxy'">
            targetURL: <span>{{policy.targetURL}}</span>
          </div>
          <div ng-show="policy.type == 'auth'">
            <span>scopes:</span>
            <ul>
              <li ng-repeat="scope in policy.scopes">
                <div class="policy-scope-item">{{scope}}</div>
              </li>
            </ul>
          </div>
        </td>
      </tr>
      </tbody>
    </table>

    <div>
      <button class="ui-btn secondary small"
              ng-click="clearGatewayMapForm()"
              ng-show="!hidebuttons">cancel</button>
      <button class="ui-btn primary small"
              ng-click="saveCurrentGatewayMap(map)"
              ng-show="!hidebuttons">Add Map</button>
    </div>
  </form>
</div>
