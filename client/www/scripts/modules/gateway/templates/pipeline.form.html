<div data-id="PipelineFormContainer">
  <form class="ui-form" name="form">
    <div class="form-field">
      <label>Name</label>
      <input type="text" name="name" ng-model="pipeline.name" required />
      <p class="error" ng-show="form.name.$error.required">
        Name is required
      </p>
    </div>
    <table class="ui-table pipelines">
      <thead>
        <tr>
          <th>Type</th>
          <th>Name</th>
          <th>Definitions</th>
          <th class="actions"></th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="policy in pipeline.renderPolicies track by $index">
          <td><ui-icon name="policy-{{policy.type}}"></ui-icon></td>
          <td title="{{policy.name}}">{{policy.name}}</td>
          <td>
            <div class="policy-details">
              <div class="scopes" ng-show="policy.type == 'auth'">
                <span class="txt">Scopes:</span>
                <span class="val">
                  <span class="scope" ng-repeat="scope in policy.scopes">{{scope}}</span>
                </span>
              </div>
              <div ng-show="policy.type == 'ratelimiting'">
                <span class="txt">Limit:</span>
                <span class="val">{{policy.limit}}</span>
                <span class="txt">Interval:</span>
                <span class="val">{{policy.interval}}</span>
              </div>
              <div ng-show="policy.type == 'reverseproxy'">
                <span class="txt">Target URL:</span>
                <span class="val">{{policy.targetURL}}</span>
              </div>
              <div ng-show="policy.type == 'metrics'">
                <span class="txt">Metrics</span>
              </div>
            </div>
          </td>
          <td class="actions">
            <a href class="ui-close" ng-click="deletePolicy(policy)">x</a>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="ui-menu-container">
      <button class="ui-btn accessory toggler" ng-click="toggleShowAddPolicyMenu()">
        Add Policy
        <span class="sl-icon sl-icon-plus-sign"></span>
      </button>
      <sl-ui-menu-dropdown toggler="showAddPolicyMenu">
        <section class="menu">
          <ul>
            <li ng-repeat="policy in availablePolicies track by $index">
              <a href ng-click="addNewPolicyToPipeline(policy)" data-id="{{policy.id}}">{{policy.name}} - {{policy.type}}</a></li>
          </ul>
        </section>
      </sl-ui-menu-dropdown>
    </div>
    <hr />
    <div ng-show="!isModal">
      <!--<button class="ui-btn secondary small" ng-click="clearPipelineForm()">Cancel</button>-->
      <button class="ui-btn primary small" ng-click="savePipeline(pipeline)">Save Pipeline</button>
    </div>
  </form>
</div>
